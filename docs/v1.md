# Primeira vers√£o

A primeira vers√£o da implementa√ß√£o dessas funcionalidades √© um contraexemplo. √â um site bem simples, que implementa as funcionalidades pedidas, mas sem se preocupar com a arquiteura e as boas pr√°ticas de desenvolvimento de software. Essa primeira vers√£o foi constru√≠da da seguinte forma:

- Aplica√ß√£o monol√≠tica: Tudo ser√° implementado em um √∫nico servidor sem modulariza√ß√£o.
- Nenhum padr√£o de arquitetura: Nada de MVC, SOA, SPA ou MOM.
- Banco de dados bagun√ßado: Estrutura de tabelas mal normalizadas.
- C√≥digo misturado: Backend e frontend dentro do mesmo c√≥digo.
- Recomenda√ß√µes e convers√£o de medidas acopladas ao backend: Sem filas, sem ass√≠ncrono.
- Pouca separa√ß√£o entre l√≥gica de neg√≥cio e interface: Queries dentro do c√≥digo da rota, HTML gerado diretamente no backend.

### Tecnologias para o anti-pattern

Para ser bem ca√≥tico, usaremos algo simples:

- Backend: Flask (Python) com rotas diretas e sem separa√ß√£o de m√≥dulos.
- Banco de Dados: SQLite (sem normaliza√ß√£o).
- Frontend: HTML misturado com templates Jinja (sem um frontend separado).
- Funcionalidades extras (Recomenda√ß√£o e Conversor): Fun√ß√µes dentro do backend, rodando de forma s√≠ncrona.

üî¥ **Problemas principais**

- Tudo est√° no mesmo arquivo, sem modulariza√ß√£o.
- Banco de dados sem normaliza√ß√£o (ingredientes como strings separadas por v√≠rgula).
- HTML sendo gerado diretamente no backend (sem um frontend separado).
- Conversor de medidas e recomenda√ß√£o de receitas acoplados ao backend principal.
- Nenhuma separa√ß√£o de responsabilidades (l√≥gica de neg√≥cios misturada com controle e exibi√ß√£o de dados).
- Uso s√≠ncrono de banco e l√≥gica, sem filas ou processamento ass√≠ncrono.

Esse c√≥digo funciona, mas √© um pesadelo para manuten√ß√£o e escalabilidade! üòÜ

Agora, podemos come√ßar a refatorar aos poucos.

### Como executar

1. Instale as depend√™ncias:

```bash
pip install -r requirements.txt
```

2. Execute o aplicativo:

```bash
python app.py
```

3. Acesse no navegador:

```
http://localhost:5000

```

# API Quantas X√≠caras - v1

Documenta√ß√£o dos endpoints dispon√≠veis na API Quantas X√≠caras.

## Endpoints

### GET /

P√°gina inicial de boas-vindas.

### Cadastro de Usu√°rio

**Endpoint:** `/cadastro`

- **M√©todo:** POST
- **Body:**

```json
{
  "nome": "string",
  "senha": "string"
}
```

- **Descri√ß√£o:** Cadastra um novo usu√°rio no sistema.

### Login

**Endpoint:** `/login`

- **M√©todo:** POST
- **Body:**

### Adicionar Receita

**Endpoint:** `/adicionar_receita`

- **M√©todo:** POST
- **Body:**

```json
{
  "nome": "string",
  "modo_preparo": "string",
  "ingrediente_id[]": ["number"],
  "quantidade[]": ["number"]
}
```

- **Descri√ß√£o:** Cadastra uma nova receita com seus ingredientes e quantidades.

### Buscar Receitas

**Endpoint:** `/buscar_receitas`

- **M√©todo:** GET
- **Descri√ß√£o:** Lista todas as receitas cadastradas no sistema.

### Recomendar Receitas

**Endpoint:** `/recomendar`

- **M√©todo:** GET
- **Descri√ß√£o:** Recomenda receitas baseadas nos ingredientes dispon√≠veis no estoque.

### Converter Medida

**Endpoint:** `/converter_medida`

- **M√©todo:** GET
- **Query Params:**
  - quantidade: number
  - unidade: string (gramas, xicaras, colheres_sopa, colheres_cha)
- **Descri√ß√£o:** Converte medidas entre diferentes unidades.

### Gerenciar Estoque

#### Adicionar ao Estoque

**Endpoint:** `/adicionar_estoque`

- **M√©todo:** POST
- **Body:**

```json
{
  "ingrediente_id": "number",
  "quantidade": "number"
}
```

- **Descri√ß√£o:** Adiciona um novo item ao estoque.

#### Listar Estoque

**Endpoint:** `/gerenciar_estoque`

- **M√©todo:** GET
- **Descri√ß√£o:** Lista todos os itens no estoque.

#### Editar Item do Estoque

**Endpoint:** `/editar_estoque/<item_id>`

- **M√©todo:** POST
- **Body:**

```json
{
  "ingrediente_id": "number",
  "quantidade": "number"
}
```

- **Descri√ß√£o:** Atualiza as informa√ß√µes de um item espec√≠fico no estoque.

#### Excluir Item do Estoque

**Endpoint:** `/excluir_estoque/<item_id>`

- **M√©todo:** GET
- **Descri√ß√£o:** Remove um item espec√≠fico do estoque.
